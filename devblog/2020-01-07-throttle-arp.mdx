---
layout: post
title: Throttle libp2p ARP
date: 2020-01-07
hide_table_of_contents: true
authors: [fvasquez]
---

After adding an ARP mechanism to libp2p with the release of `2020.01.05.0` on January 6, 2020 we
noticed that gossip quality began to degrade again over time. To remedy this we decreased the ARP's
peer staleness time from 24 hours down to 6 minutes and began throttling ARP requests. We also
bumped the assumed valid block to 165,353 for faster resync times.

<!--truncate-->

## Content

- Fix ARP peer staleness time and add a throttle for ARP requests: PR:
  [libp2p/240](https://github.com/helium/erlang-libp2p/pull/240)
- Add peer refresh CLI command: PR
  [blockchain-core/334](https://github.com/helium/blockchain-core/pull/334)

## Deployment Plan

We plan to beta `2020.01.07.0` for a couple of hours starting at 1:45 PM PDT and confirm that the GA
release OTA downgrades successfully before making it available to all hotspots.
