---
layout: post
title: Initial Work for On-Chain Packet Routing
date: 2020-05-08 14:00 -0700
hide_table_of_contents: true
authors: [vagabond, madninja, evanmcc]
---

This release lands a bunch of work (7000+ lines of code) to enable proper packet routing using the
ledger information. This work also lays the groundwork for paying for packets with data credits. You
can read more details in the earlier blog post
[here](https://engineering.helium.comhttps://docs.helium.com/blog/2020/05/05/lorawan-network-upgrade-potential-disruption-mitigation.html).

<!--truncate-->

Additionally this release fixes a bug that could cause the Honeybadger BFT reliable broadcast
sub-protocol to fail to converge in some rare situations.

### Contents

- _State Channels and routing tables_: PRs:
  [core/434](https://github.com/helium/blockchain-core/pull/434)
  [miner/389](https://github.com/helium/miner/pull/389)
- _HBBFT RBC partition testing_: PR: [hbbft/56](https://github.com/helium/erlang-hbbft/pull/56)

### Plan

A `2020.05.09.0` release was deployed to the beta group the evening of Friday the 8th PST. We did
some testing over the weekend and into Monday. Monday afternoon we identified some small fixes and
cut `2020.05.11.0` which we deployed to the beta group around 4:30pm PST. At about 7pm PST, if the
betas look good we will release to GA. On Tuesday morning we plan to activate the routing tables on
the blockchain and perform the subband 2 switch by GAing a second release, which will simply change
the config files for the subband 2 switch.
