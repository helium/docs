---
layout: post
title: 'Blockchain Release: Network Improvements'
date: 2021-06-17 16:33 -0700
hide_table_of_contents: true
authors: [vihu]
---

The core developers have tagged a new `2021.06.18.0` Hotspot firmware release which contains network
improvements related to NAT and bug fixes related to staking for Validators. This is a _required_
release for Hotspot owners. As some of the community members have noticed that the blockchain has
not generated a new snapshot since the last GA, we believe that the improvements to networking and
an increment to snapshot memory generation limit will fix snapshot generation. The core developers
plan to do another minor release with a snapshot update once it gets generated by the blockchain.

<!--truncate-->

Below are the related PRs:

- #### Network improvements

  The core developers have squashed a few NAT related bugs in `erlang-libp2p`, we believe these
  fixes should significantly improve Hotspot sync.

  - [erlang-libp2p#356](https://github.com/helium/erlang-libp2p/pull/356): Stand a relay if stungun
    repeatedly fails to verifiably resolve
  - [erlang-libp2p#355](https://github.com/helium/erlang-libp2p/pull/355): Handle relay server
    crashing and re-acquire a relay address
  - [erlang-libp2p#354](https://github.com/helium/erlang-libp2p/pull/354): Cancel retry timer on
    relay stop command
  - [erlang-libp2p#353](https://github.com/helium/erlang-libp2p/pull/353): Once NAT type is
    detected, stop trying to re-detect it
  - [erlang-libp2p#351](https://github.com/helium/erlang-libp2p/pull/351): Make 3 distinct observed
    addresses trigger static NAT determination
  - [erlang-libp2p#350](https://github.com/helium/erlang-libp2p/pull/350): Improve static port map
    discovery for other NAT types

- #### Blockchain Bug fixes

  A few `blockchain-core` bug fixes are also packed in this release specifically around snapshot
  generation and staking bugs observed on the Testnet.

  - [blockchain-core#870](https://github.com/helium/blockchain-core/pull/870): Increase snapshot
    generation memory limit
  - [blockchain-core#868](https://github.com/helium/blockchain-core/pull/868): Move tenure penalties
    to the beginning of the election round
  - [blockchain-core#865](https://github.com/helium/blockchain-core/pull/865): Fix off-by-one
    validation error in `blockchain_txn_unstake_validator_v1`

### Plan

We have been beta testing `2021.06.18.0` since June 18th, 2021 10:30 AM PT. Current ETA for GA is
2:00 PM PT, June 18th, 2021.
