---
id: lorawan-on-helium
hide_title: true
sidebar_label: Introduction
slug: /lorawan-on-helium
---

# LoRaWAN On Helium

The LoRaWAN Network on Helium is **compatible with all LoRaWAN devices**.
However, Helium distinguishes itself in how it treats the LoRaWAN Network Server
(LNS).

In typical LoRaWAN Networks, a central or regional LNS is managed by a single
entity. Helium’s design for a decentralized network, however, means not only do
we want gateways (or what we sometimes call Hotspots) to be independently owned
and operated, but we want to enable the independent operation of the LNS.
Without this, access to the network would require permission from a single
central entity, the LNS operator of the network.

Therefore, we want to enable the _multi-tenancy_ of LNS’s on the same Public
LoRaWAN Network. Achieving this distinguishes Helium’s LoRaWAN Network from any
other: public wireless infrastructure has become compatible with privately-run
network servers.

## The OUI

Each LoRaWAN Network Server (LNS) on the Helium Network acquires an
Organizationally Unique Identifier (OUI). This registers the LNS with the
blockchain and allocates two very important routing objects owned and maintained
by the OUI operator:

- up to five **filters**, allowing gateways to route Join frames
- one or more **slabs** of DevAddrs

### Join Frames and Filters

A LoRaWAN **Join** packet has the following unencrypted header:

```bash
___________________________________________________________
|   Size (octets)  |      8     |      8     |      8     |
|   Join Request   |   AppEUI   |   DevEUI   |  DevNonce  |
‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾
```

From the gateways perspective, the (AppEUI, DevEUI) may be used to figure out if
one or more OUI's may be interested in the Join Request.

This is done by querying every filter maintained and written to the blockchain
by every OUI. The filters themselves are _xorhash_ tables, thus the AppEui and
DevEui cannot be extracted. With an AppEui and DevEui in-hand though, the
gateway can run it through the table and see if it is in the table.

In typical LoRaWAN fashion, the
[LongFi Network Server](https://github.com/helium/devdocs/tree/67b988ec351854ec4b7608e12b5b8f47f2456abf/longfi/longfi-network-server/README.md)
then responds with a DevAddr \(and lots of other information which is used to
derive session keys\).

This DevAddr is important because it is now part of the **Data** packets.

### Data Frames and DevAddr Slabs

Data packets have the followed unencrypted header (FHDR):

```bash
________________________________________________________________________
|   Size (octets)  |     4      |      1     |      2     |    0..15   |
|   FHDR           |  DevAddr   |    FCtrl   |     FCnt   |    FOpts   |
‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾
```

From the gateways perspective, it is able to use DevAddr to determine the OUI of
Data frames. Note that the look-up and routing by DevAddr instead of \(AppEUI,
DevEUI\) is much faster.
